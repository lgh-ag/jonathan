<html>
  <head>
    <title>FeRiEn CoUnTEr</title>
    <link rel="stylesheet" href="https://bootswatch.com/4/sketchy/bootstrap.css">
    
  </head>
  <body>
    <!-- HAHAHAHAHA SCAM SEITE DO NOT GO HYRDRAUF -->
    <!--LOGIN user:yougot pass:jebaited-->
    <h1>FeRiEn CoUnTEr - funktioniert auf "jeden" Fall</h1>
    <p id="countdown_main">lÃ¶ding.-...</p>
    <h3 id="FerienArt">loading.....-_-...</h3>
    <br>
    <p>Welches FFerien willst du sen?</p>
    <select class="btn btn-primary" id="auswahl-swibel">
      <option value="winterferien-2022-TH">Winterferien</option>
      <option value="osterferien-2022-TH">Osterferien</option>
      <option value="pfingstferien-2022-TH">Pfingstferien</option>
      <option value="sommerferien-2022-TH">Sommerferien</option>
      <option value="herbstferien-2022-TH">Herbstferien</option>
      <option value="weihnachtsferien-2022-TH">Weihnachtsferien</option>
    </select>
    <br>
    <br>
    <br>
    <table class="table table-hover" border="4px">
      <thead>
        <tr>
          <td>
            <p>Ferien</p>
          </td>
          <td>
            <p>Beginn</p>
          </td>
          <td>
            <p>Ende</p>
          </td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <p>Osterferien</p>
          </td>
          <td>
            <p>30.02.2021</p>
          </td>
          <td>
            <p>89.13.8000</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>Sommerferien</p>
          </td>
          <td>
            <p>01.06.2021</p>
          </td>
          <td>
            <p>02.06.2021</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>Herbstferien</p>
          </td>
          <td>
            <p>03.06.2021</p>
          </td>
          <td>
            <p>04.06.2021</p>
          </td>
        </tr>
      </tbody>
    </table>
    <a href="https://github.com/lgh-ag/lghag.de"><h3>Hier findest du noch mehr Kagge die wir "programmiert" haben. Also eigentlich ist das ja kein "Code" sondern eher ne "Designsprache" also praktisch PowerPoint. xD Lost wer das liest.</h3></a>

    <script src="https://cdn.jsdelivr.net/npm/underscore@latest/underscore-umd-min.js"></script>
    <script>
        var json = "";
        var obj = null;
        var ferienDate = null;

        function reqListener () {
            json = this.responseText;
            obj = JSON.parse(json);

            selectChange();
            getSeconds();
      
        }

        var oReq = new XMLHttpRequest();
            oReq.addEventListener("load", reqListener);
            oReq.open("GET", "https://lgh-ag-cors.herokuapp.com/https://ferien-api.de/api/v1/holidays/TH/2022");
            oReq.setRequestHeader("x-requested-with", "lghag.de");
            oReq.send();

      function msToTime(s){
      var millis  = s % 1000;
          seconds = Math.floor(s / 1000),
          minutes = Math.floor(seconds / 60),
          hours   = Math.floor(minutes / 60),
          days    = Math.floor(hours / 24),
          months  = Math.floor(days / 30),
          years   = Math.floor(days / 365);

      seconds %= 60;
      minutes %= 60;
      hours %= 24;
      days %= 30;
      months %= 12;

      if (years == 0) {
        var returnYear = '';
      }
      else {
        var returnYear = 'Jahre: ' + years;
      }

      if (months == 0) {
        var returnMonth = '';
      }
      else {
        var returnMonth = ' Monate: ' + months;
      }

      if (days == 0) {
        var returnDay = '';
      }
      else {
        var returnDay = ' Tage: ' + days;
      }

      if (hours == 0) {
        var returnHour = '';
      }
      else {
        var returnHour = ' Stunden: ' + hours;
      }
      
      if (minutes == 0) {
        var returnMinute = '';
      }
      else {
        var returnMinute = ' Minuten: ' + minutes;
      }
      
      if (seconds == 0) {
        var returnSecond = '';
      }
      else {
        var returnSecond = ' Sekunden: ' + seconds;
      }
      
      if (millis == 0) {
        var returnMilli = '';
      }
      else {
        var returnMilli = ' Millisekunden: ' + millis;
      }
      
      return returnYear + returnMonth + returnDay + returnHour + returnMinute + returnSecond + returnMilli;
      }



      function getSeconds() {
        
        
        var currentDate = Date.now();
        s = ferienDate - currentDate;
        finalDate = msToTime(s);
        
        document.getElementById("countdown_main").innerHTML = finalDate;
        setTimeout(getSeconds, 20);
      }

      var select = document.getElementById("auswahl-swibel");

      function selectChange() {
        ferienDate = Date.parse(_.where(obj, {"slug" : select.value})[0].start);
        var ferien = _.where(obj, {"slug" : select.value})[0].name;
        document.getElementById("FerienArt").innerHTML = 'bis zu den ' + ferien.slice(0, 1).toUpperCase() + ferien.slice(1) + '! ðŸ“… 2022' ;
      }
      select.onchange = selectChange;
    </script>
  </body>
</html>